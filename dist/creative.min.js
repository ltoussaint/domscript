/*! domscript 2016-03-28 */
!function(a){a.Class("$.Dom.Abstract",function(b){return b.domElement,b.domContainer,b.oOwnerSvg,this.getDomElement=function(){return b.domElement},this.getValue=function(){return b.domElement.value||null},this.isChecked=function(){return b.domElement.checked||!1},this.check=function(){return a.isUndefined(b.domElement.checked)||(b.domElement.checked=!0),this},this.uncheck=function(){return a.isUndefined(b.domElement.checked)||(b.domElement.checked=!1),this},this.addClass=function(c){return a.addClass(b.domElement,c),this},this.removeClass=function(c){return a.removeClass(b.domElement,c),this},this.hasClass=function(c){return a.hasClass(b.domElement,c)},this.addStyle=function(c,d){return a.addStyle(b.domElement,c,d),this},this.addCss=function(c){return a.addCss(b.domElement,c),this},this.appendChild=function(a){return b.domElement.appendChild(a.getDomElement()),this},this.addEvent=function(c,d,e){return e=e||this,a.addEvent(b.domElement,c,function(b,c){b.$domTarget=a.Load("$.Dom.Element",b.target),d.call(e,b,c)}),this},this["delete"]=function(){return b.domElement.parentNode.removeChild(b.domElement),this},this.setOwnerSvg=function(a){return b.oOwnerSvg=a,this},this.isDomScript=!0,!0});a.Class("$.Dom.Element",function(b){function c(){var c=a.template(b.__template);this.html(c({$this:this,$that:b}))}b.__id=null,b.__container=null,b.__template=null,b.__class=null,this.__construct=function(d,e){if(a.isString(d))if(0===d.indexOf("#")){if(b.domElement=document.getElementById(d.substring(1)),null==b.domElement)throw new Error("Element with specified id not found : "+d)}else a.isUndefined(e)?b.domElement=document.createElement(d.toLowerCase()):b.domElement=document.createElementNS(e,d.toLowerCase());else a.isUndefined(d)?b.domElement=document.createElement("div"):b.domElement=d;if(a.isNull(b.__template)||c.call(this),a.isNull(b.__id)||b.domElement.setAttribute("id",b.__id),a.isNull(b.__class)||(b.domElement.className=b.__class),!a.isNull(b.__container))if(b.__container.isDomScript)b.__container.appendChild(this);else{var f=a.Load("$.Dom.Element",b.__container);f.appendChild(this)}return this},this.getDomElementFromTemplate=function(){var a=this.getTemplateContent(),c=new RegExp("^[ 	\r\n\f]*<([a-z]+)[^>]*>(.*)</\\1>","im"),d=c.exec(a);if(null==d)throw Error("Can't parse microtemplate");b.domElement=document.createElement(d[1]),b.domContent=d[2],this.reloadContent()},this.getTemplateContent=function(){if(0===b.__template.indexOf("<"))return b.__template;try{return document.getElementById(b.__template).innerHTML}catch(a){throw Error("Can't find microTemplate with id "+b.__template)}},this.getAttribute=function(c){return a.getAttribute(b.domElement,c)},this.setAttribute=function(c,d){return a.setAttribute(b.domElement,c,d),this},this.onClick=function(b){if(a.isFunction(b))return this.addEvent("click",b),this;throw new Exception("Onclick need callback function as first parameter.")},this.html=function(a){b.domElement.innerHTML=a},this.text=function(a){b.domElement.textContent=a},this.reloadTemplate=function(){a.isNull(b.__template)||c.call(this)}}).Extend("$.Dom.Abstract"),a.Class("$.Dom.Canvas",function(b){function c(){return b.context.globalAlpha=1,b.context.fillStyle="#FFFFFF",this}b.context,b.height=150,b.width=300,b.children=[],b.fillStyle=null,this.__construct=function(){this.parentCall("__construct","canvas")},this.display=function(){b.fillStyle&&(console.log("Display fill style"),b.context.fillStyle=b.fillStyle),console.log("Reload canvas");for(var a in b.children)for(var d in b.children[a])b.children[a][d].display(),c.call(this)},this.getContext=function(){return b.context},this.getHeight=function(){return b.height},this.setHeight=function(a){return b.height=a,b.domElement.setAttribute("height",b.height),this},this.getWidth=function(){return b.width},this.setWidth=function(a){return b.width=a,b.domElement.setAttribute("width",b.width),this},this.addChild=function(c,d){return d=d||1,a.isUndefined(b.children[d])&&(b.children[d]=[]),console.log("Add child",this),c.setCanvas(this),b.children[d].push(c),console.log(b.children),this},this.setFillStyle=function(a){return b.fillStyle=a,this},this.getFillStyle=function(){return b.fillStyle},b._initCanvas=function(){return b.context=b.domElement.getContext("2d"),this}}).Extend("$.Dom.Element"),a.Class("$.Creative.Stage",function(a){this.__construct=function(a,b){this.parentCall("__construct",a,b)}}).Extend("$.Dom.Svg")}(window.$);